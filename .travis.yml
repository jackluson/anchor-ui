language: node_js

node_js:
  - 12.13.1

branches:
  only:
    - main
    - "/^v?\\d{1}\\.\\d{1,2}.\\d{1,2}$/"

cache:
  directories:
    - node_modules #缓存依赖

# S: Build Lifecycle
install:
  - yarn install

# You can add a script with a echo to your .travis.yml file.
# This will force Travis to run your script message instead of running tests automatically.

script:
  - echo "skipping tests"

before_deploy: npm run build:pkg

deploy:
  edge: true
  provider: npm
  email: luxuemin2108@gmail.com
  # cleanup: true
  api_key:
    secure: WK1Ggb6NQfiXdgN4MCzbpx8JFyTUF8kS8Y0fSKl5OoHbvVFXeNlmsXAupVV7Lksl+Gnz3VrKZQHU3g7ldoR8O1emX3+Y5pvVtoSm0tp/75aNtCrLJSbzvFvOf/al3zPJoKOngVQeObDHlXh7K8nbwMsuirsSAmYtXuRseFEqZ9paz+AOXhTvlRGyz4ERthyecdoT04IVHDRtPqo5gcfdpYKPw8UAFWkVsVKFtqVS24XINa6ASilPsrOi8PVoEd9k7Fi2iEoawQmmVzPIZyOarNCEdq8TlF76JlIdwzRcI9h9hA04kcFJ9WemDBMR5cRywnUBDgfhUz9twAuYSUuHhmxgOYN+AY596B/RFH0b7INs/Nx9naAn+DRC2UY/flc4AhJiqJzYrywQcYb4bjpKCi7upKxDBA4k7U7m+pQyhIyGO2bLjYGkbldcb9TE6kguDnk7vYeE1+i5OySXxh8eKDzAfjO8CTPdfwF8jkqLNNgO1f0FLdYUkMH9CYwmcd2bFbqMSERhWeue+YJBeWXEsS8/dqyEmUDxnntfnM/CiPEdCi/p1CMLaCFepzWvyVBEpNnDeLCJi+8JtBq0uFuqr3kerEIzbynHNa4+UN7S5O3AypyO3QVDy4rpHHfQwwjxIIW2MWC7/IIo6pPdddRWzHCT/dUSmEd6HBTkeVmZp1Q=
  on:
    # tags: true
    repo: jackluson/anchor-ui
    branch: main

notifications:
  email:
    recipients:
      - luxuemin2108@gmail.com
    on_success: never
    on_failure: always
