<template>
  <anchor-table :column="tableData.column" :data="tableData.data">
    <template v-slot:headerSlotName="{ column }">
      <el-input
        v-model="search"
        size="mini"
        placeholder="è¾“å…¥å…³é”®å­—æœç´¢"
        @input="handleInput($event, column)"
      />
    </template>
  </anchor-table>
</template>

<script>
export default {
  data() {
    return {
      tableData: {
        column: [
          {
            prop: "date",
            label: "æ—¥æœŸ",
            renderHeader: (h, scope) => {
              return (
                <span>
                  <i class="el-icon-time">{scope.column.label}</i>
                </span>
              );
            },
          },
          {
            prop: "name",
            label: "å§“å",
          },
          {
            label: "æ“ä½œ",
            slotHeaderName: "headerSlotName",
            render: (h, scope) => {
              return (
                <div>
                  <el-button
                    size="mini"
                    onClick={() => {
                      this.handleEdit(scope.$index, scope.row);
                    }}
                  >
                    ç¼–è¾‘
                  </el-button>
                  <el-button
                    size="mini"
                    type="danger"
                    onClick={() => {
                      this.handleDelete(scope.$index, scope.row);
                    }}
                  >
                    åˆ é™¤
                  </el-button>
                </div>
              );
            },
          },
        ],
        data: [
          {
            date: "2016-05-02",
            name: "ç‹å°è™1",
            address: "ä¸Šæµ·å¸‚æ™®é™€åŒºé‡‘æ²™æ±Ÿè·¯ 1518 å¼„",
          },
          {
            date: "2016-05-02",
            name: "ç‹å°è™2",
            address: "ä¸Šæµ·å¸‚æ™®é™€åŒºé‡‘æ²™æ±Ÿè·¯ 1518 å¼„",
          },
          {
            date: "2016-05-02",
            name: "ç‹å°è™3",
            address: "ä¸Šæµ·å¸‚æ™®é™€åŒºé‡‘æ²™æ±Ÿè·¯ 1518 å¼„",
          },
        ],
      },
      search: "",
    };
  },
  watch: {
    search(newVal, oldVal) {
      console.log(
        `ğŸš€ ~ file: render-header-table.vue ~ line 88 ~ search ~ newVal, oldVal`,
        newVal,
        oldVal
      );
    },
  },
  methods: {
    handleInput(val, row) {
      console.log(
        row,
        `ğŸš€ ~ file: slot-header-table.vue ~ line 93 ~ handleInput ~ val`,
        val
      );
      // this.search = val;
    },
    handleEdit(index, row) {
      console.log(index, row);
      this.$message(`ç‚¹å‡»çš„äº†ç¼–è¾‘ï¼Œç´¢å¼•ï¼š${index}`);
    },
    handleDelete(index, row) {
      console.log(index, row);
      this.$message(`ç‚¹å‡»çš„äº†åˆ é™¤ï¼Œç´¢å¼•ï¼š${index}`);
    },
  },
};
</script>
